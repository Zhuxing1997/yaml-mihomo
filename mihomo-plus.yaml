# 原作者项目 https://github.com/SilverWolfOfficial/clash-config/blob/main/clash-config.yaml
# 在原作者的基础上进行二改，目的在于精简
proxy-providers:
  A机场:
    url: "A机场订阅填写在这里"
    type: http
    interval: 86400
    health-check:
      enable: true
      url: "https://www.gstatic.com/generate_204"
      interval: 600
  B机场:
    url: "B机场订阅填写在这里"
    type: http
    interval: 864000
    health-check:
      enable: true
      url: "https://www.gstatic.com/generate_204"
      interval: 600
      
# 单节点按照正确格式录于此处
# 下面的是示例，采用本yaml时请删除示例节点，改为你自己的节点
proxies:
  - {name: 应急hk09, server: abc.com.cn, port: 55555, type: ss, cipher: aes-128-gcm, password: 4444444444, udp: true}
  - {name: 应急SG 339, server: abc.com.cn, port: 55555, type: ss, cipher: aes-128-gcm, password: 4444444444, udp: true}

port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7894
allow-lan: true
bind-address: "*"
ipv6: false
unified-delay: true
tcp-concurrent: true
log-level: warning
find-process-mode: off
global-client-fingerprint: chrome
keep-alive-idle: 600
keep-alive-interval: 15
disable-keep-alive: false
skip-auth-prefixes:
  - 192.168.0.0/16
  - 127.0.0.1/32
  - ::1/128
profile:
  store-selected: true
  store-fake-ip: true
  global-ua: clash.meta

external-controller: 0.0.0.0:9090
secret: ""
external-ui: "/etc/nikki/run"
external-ui-name: zashboard
external-ui-url: "https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip"

tun:
  enable: true
  stack: mixed
  dns-hijack: ["any:53", "tcp://any:53"]
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  loopback-address:
    - 10.7.0.1

dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "rule-set:private_domain,cn_domain,bank_cn_domain,ai_cn_domain,apple_cn_domain,steam_cn_domain"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "time.*.com"
  default-nameserver:
    - 223.5.5.5
  proxy-server-nameserver:
    - https://223.5.5.5/dns-query
  nameserver:
    - 223.5.5.5
    - 119.29.29.29

#  出站策略	
pr: &pr {type: select, proxies: [一键代理, 香港手动, 台湾手动, 日本手动, 新加坡手动, 美国手动, 手动选择, 应急节点, DIRECT]}
proxy-groups:
- {name: 一键代理, type: select, proxies: [自动选择, 香港手动, 台湾手动, 新加坡手动, 日本手动, 美国手动, 应急节点, DIRECT]}
- {name: 自动选择, type: url-test, include-all: true, tolerance: 50, interval: 300}
- {name: ChatGPT, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/ChatGPT.png"}
- {name: 微软服务, <<: *pr, icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/microsoft.png"}
- {name: 流媒体, <<: *pr, icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/3343ab556e28f94f1a000ee4a7123aa3ca7ed731/icon/netfix.png"}
- {name: 数字货币, <<: *pr, icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Cryptocurrency_2.png"}
- {name: Apple, type: select, proxies: [DIRECT, 一键代理],icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/apple.png"}
- {name: 美国手动, type: select, include-all: true, filter: "(?i)美|us|unitedstates|america"}
- {name: 日本手动, type: select, include-all: true, filter: "(?i)日|jp|japan"} 
- {name: 台湾手动, type: select, include-all: true, filter: "(?i)台|tw|taiwan"}
- {name: 香港手动, type: select, include-all: true, filter: "(?i)港|hk|hongkong|hong kong"}
- {name: 新加坡手动, type: select, include-all: true, filter: "(?i)新|sg|singapore"}
- {name: 应急节点, type: select, include-all: true, filter: "(?i)急"}
- {name: 手动选择, type: select, include-all: true}



rules:
  - RULE-SET,banad_domain,DIRECT
  - RULE-SET,private_domain,DIRECT
  - RULE-SET,bank_cn_domain,DIRECT
  - RULE-SET,ai_cn_domain,DIRECT
  - RULE-SET,apple_cn_domain,DIRECT
  - RULE-SET,proxylite,一键代理
  - RULE-SET,anthropic_domain,ChatGPT
  - RULE-SET,ai,ChatGPT
  - RULE-SET,openai_domain,ChatGPT
  - RULE-SET,google_domain,一键代理
  - RULE-SET,crypto_domain,数字货币
  - RULE-SET,onedrive_domain,微软服务
  - RULE-SET,microsoft_domain,微软服务
  - RULE-SET,steam_domain,一键代理
  - RULE-SET,steam_cn_domain,DIRECT
  - RULE-SET,steamcdn_domain,DIRECT
  - RULE-SET,steamcdn_ip,DIRECT,no-resolve
  - RULE-SET,telegram_domain,一键代理
  - RULE-SET,netflix_domain,流媒体
  - RULE-SET,appletv_domain,流媒体
  - RULE-SET,paypal_domain,一键代理
  - RULE-SET,gfw_domain,一键代理
  - RULE-SET,geolocation-!cn,一键代理
  - RULE-SET,cn_domain,DIRECT
  - RULE-SET,twitter_ip,一键代理,no-resolve
  - RULE-SET,google_ip,一键代理,no-resolve
  - RULE-SET,netflix_ip,流媒体,no-resolve
  - RULE-SET,telegram_ip,一键代理,no-resolve
  - RULE-SET,private_ip,DIRECT,no-resolve
  - RULE-SET,cn_ip,DIRECT
  
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
rule-providers:
  banad_domain: { <<: *domain, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/Domain/banAd.mrs" }
  private_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs" }
  bank_cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/category-bank-cn.mrs" }
  proxylite: { <<: *class, url: "https://raw.githubusercontent.com/sev7enshare/Clash-Config/refs/heads/main/list/proxy.list" }
  anthropic_domain: { <<: *domain, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/anthropic.mrs" }
  ai: {  <<: *domain, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ai-!cn.mrs" }
  openai_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/openai.mrs" }
  ai_cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/category-ai-cn.mrs" }
  appletv_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/apple-tvplus.mrs" }
  google_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs" }
  facebook_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/facebook.mrs" }
  whatsapp_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/whatsapp.mrs" }
  instagram_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/instagram.mrs" }       
  twitter_domain: { <<: *domain, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/twitter.mrs" }
  crypto_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/category-cryptocurrency.mrs" }
  telegram_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs" }
  netflix_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs"}
  paypal_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/paypal.mrs" }
  onedrive_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.mrs" }
  microsoft_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs" }
  steam_cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/steam@cn.mrs" }
  steamcdn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/Domain/Steam-domain.mrs" }
  steam_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/steam.mrs" }
  apple_cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.mrs" }
  gfw_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs" }
  geolocation-!cn: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs" }
  cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs" }
  cn_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs" }
  google_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs" }
  telegram_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs" }
  netflix_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs" }
  private_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geoip/private.mrs" }
  steamcdn_ip: { <<: *ip, url: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/rules/IP/steamCDN-ip.mrs" }
  twitter_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geoip/twitter.mrs" }


